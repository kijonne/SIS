–ë—Ä–æ, –≤–æ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ä–∞–±–æ—á–∏–µ –∏ –ø–æ–Ω—è—Ç–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –≤—Å–µ—Ö –ø—è—Ç–∏ –∑–∞–¥–∞–Ω–∏–π (5.1‚Äì5.5).  
–ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –ø–æ–¥ **NASM x64 Linux** (—Ç–æ, —á—Ç–æ –æ–±—ã—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ SASM –±–µ–∑ –ø—Ä–æ–±–ª–µ–º).  

–í—Å–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç **syscall** –¥–ª—è –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞.  
–ì–¥–µ –Ω—É–∂–Ω–æ ‚Äî –¥–æ–±–∞–≤–∏–ª –ø—Ä–æ—Å—Ç–æ–π –≤–≤–æ–¥ —á–∏—Å–µ–ª –∏ —Å—Ç—Ä–æ–∫ (–±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫).  
–ö–∞–∂–¥–æ–µ –∑–∞–¥–∞–Ω–∏–µ ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Ñ–∞–π–ª (–∫–∞–∫ —Ç—Ä–µ–±—É–µ—Ç –ø.6.1).  
–í –∫–æ–Ω—Ü–µ –ø–æ–∫–∞–∂—É, –∫–∞–∫ —Å–æ–±—Ä–∞—Ç—å –≤—Å—ë –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª (–ø.6.2).

### –û–±—â–∏–µ —Å–æ–≤–µ—Ç—ã –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –≤ SASM
- –í SASM –≤—ã–±–∏—Ä–∞–π **NASM + ld** (64-bit).
- –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤—ã–≤–æ–¥–∞ –ø–æ—Å—Ç–∞–≤—å "Console" –∏–ª–∏ "Use printf/scanf" ‚Äî –Ω–æ –º–æ–π –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç syscall, —Ç–∞–∫ —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –±–µ–∑.
- –ï—Å–ª–∏ –Ω–µ –≤—ã–≤–æ–¥–∏—Ç ‚Äî –ø—Ä–æ–≤–µ—Ä—å "Run arguments" –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –∂–º–∏ F9 (Build & Run).

### 5.1 ‚Äî –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ

```nasm
; –õ–† ‚Ññ6 –ó–∞–¥–∞–Ω–∏–µ 5.1 ‚Äî –æ–±—Ä–∞—Ç–Ω–∞—è –∫–æ–ø–∏—è —Å—Ç—Ä–æ–∫–∏
section .data
    src     db      "Hello, World!", 0
    src_len equ     $ - src - 1             ; –±–µ–∑ 0

    msg1    db      "–ò—Å—Ö–æ–¥–Ω–∞—è: "
    msg1len equ     $ - msg1
    msg2    db      10, "–û–±—Ä–∞—Ç–Ω–∞—è: "

section .bss
    dst     resb    64                      ; —Ö–≤–∞—Ç–∏—Ç –º–µ—Å—Ç–∞

section .text
    global _start

_start:
    ; –≤—ã–≤–æ–¥ "–ò—Å—Ö–æ–¥–Ω–∞—è: "
    mov     rax, 1
    mov     rdi, 1
    mov     rsi, msg1
    mov     rdx, msg1len
    syscall

    ; –≤—ã–≤–æ–¥ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
    mov     rax, 1
    mov     rdi, 1
    mov     rsi, src
    mov     rdx, src_len
    syscall

    ; –∫–æ–ø–∏—Ä—É–µ–º –∑–∞–¥–æ–º –Ω–∞–ø–µ—Ä—ë–¥
    mov     rsi, src + src_len - 1          ; –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–∏–º–≤–æ–ª
    mov     rdi, dst
    mov     rcx, src_len
    std                                     ; DF=1 ‚Üí —É–º–µ–Ω—å—à–∞–µ–º RSI

rev_loop:
    lodsb                                   ; al = [rsi], rsi--
    stosb                                   ; [rdi] = al, rdi++
    loop    rev_loop

    cld                                     ; DF=0 –æ–±—Ä–∞—Ç–Ω–æ

    ; –≤—ã–≤–æ–¥ "–û–±—Ä–∞—Ç–Ω–∞—è: "
    mov     rax, 1
    mov     rdi, 1
    mov     rsi, msg2
    mov     rdx, 3                          ; 10 + "–û–±—Ä–∞—Ç–Ω–∞—è: " –±–µ–∑ 0
    syscall

    ; –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    mov     rax, 1
    mov     rdi, 1
    mov     rsi, dst
    mov     rdx, src_len
    syscall

    ; –Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞
    mov     rax, 1
    mov     rdi, 1
    mov     rsi, msg2
    mov     rdx, 1                          ; —Ç–æ–ª—å–∫–æ \n
    syscall

    ; exit
    mov     rax, 60
    xor     rdi, rdi
    syscall
```

### 5.2 ‚Äî –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Å—Ç—Ä–æ–∫–∏ —Å –ø–æ–∑–∏—Ü–∏–∏ i –¥–ª–∏–Ω–æ–π n (–≤–≤–æ–¥ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)

```nasm
; –õ–† ‚Ññ6 –ó–∞–¥–∞–Ω–∏–µ 5.2 ‚Äî –ø–æ–¥—Å—Ç—Ä–æ–∫–∞ —Å –ø–æ–∑–∏—Ü–∏–∏ i –¥–ª–∏–Ω–æ–π n
section .data
    s1      db      "–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π", 0
    prompt_i db     10, "–ü–æ–∑–∏—Ü–∏—è i (—Å 1): "
    prompt_n db     10, "–î–ª–∏–Ω–∞ n: "
    result  db      10, "–ü–æ–¥—Å—Ç—Ä–æ–∫–∞: "

section .bss
    buf     resb    32                      ; –¥–ª—è –≤–≤–æ–¥–∞ —á–∏—Å–µ–ª
    substr  resb    128                     ; —Ä–µ–∑—É–ª—å—Ç–∞—Ç

section .text
    global _start

_start:
    ; –≤—ã–≤–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è i
    mov     rax, 1
    mov     rdi, 1
    mov     rsi, prompt_i
    mov     rdx, 18
    syscall

    ; —á—Ç–µ–Ω–∏–µ i
    mov     rax, 0
    mov     rdi, 0
    mov     rsi, buf
    mov     rdx, 16
    syscall

    call    str_to_num
    mov     r12, rax                        ; r12 = i (1-based)

    ; –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ n
    mov     rax, 1
    mov     rdi, 1
    mov     rsi, prompt_n
    mov     rdx, 11
    syscall

    ; —á—Ç–µ–Ω–∏–µ n
    mov     rax, 0
    mov     rdi, 0
    mov     rsi, buf
    mov     rdx, 16
    syscall

    call    str_to_num
    mov     rcx, rax                        ; rcx = n

    ; –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
    mov     rsi, s1
    mov     rax, r12
    dec     rax                             ; —Ç–µ–ø–µ—Ä—å 0-based
    add     rsi, rax                        ; rsi ‚Üí –Ω–∞—á–∞–ª–æ –ø–æ–¥—Å—Ç—Ä–æ–∫–∏
    mov     rdi, substr
    cld
    rep     movsb                           ; –∫–æ–ø–∏—Ä—É–µ–º rcx –±–∞–π—Ç

    ; –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    mov     rax, 1
    mov     rdi, 1
    mov     rsi, result
    mov     rdx, 12
    syscall

    mov     rax, 1
    mov     rdi, 1
    mov     rsi, substr
    mov     rdx, rcx                        ; —Å–∫–æ–ª—å–∫–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏
    syscall

    ; \n
    mov     rax, 1
    mov     rdi, 1
    mov     rsi, prompt_i                   ; —Ç–∞–º –µ—Å—Ç—å 10
    mov     rdx, 1
    syscall

    ; –≤—ã—Ö–æ–¥
    mov     rax, 60
    xor     rdi, rdi
    syscall


; –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º–∞: —Å—Ç—Ä–æ–∫–∞ ‚Üí —á–∏—Å–ª–æ (–ø—Ä–æ—Å—Ç–∞—è, –¥–æ 10 —Ü–∏—Ñ—Ä)
str_to_num:
    xor     rax, rax
    xor     rbx, rbx
.loop:
    mov     bl, [rsi]
    inc     rsi
    cmp     bl, 10
    je      .done
    cmp     bl, 13
    je      .done
    cmp     bl, 0
    je      .done
    sub     bl, '0'
    imul    rax, 10
    add     rax, rbx
    jmp     .loop
.done:
    ret
```

### 5.3 ‚Äî –ü–æ–¥—Å—á—ë—Ç –¥–ª–∏–Ω—ã –≤–≤–µ–¥—ë–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ (–¥–æ 0 –∏–ª–∏ \n)

```nasm
; –õ–† ‚Ññ6 –ó–∞–¥–∞–Ω–∏–µ 5.3 ‚Äî –¥–ª–∏–Ω–∞ –≤–≤–µ–¥—ë–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
section .data
    prompt  db      "–í–≤–µ–¥–∏ —Å—Ç—Ä–æ–∫—É: ", 0
    msg     db      10, "–î–ª–∏–Ω–∞ = "

section .bss
    buf     resb    256
    numbuf  resb    32                      ; –¥–ª—è —á–∏—Å–ª–∞ –≤ —Å—Ç—Ä–æ–∫—É

section .text
    global _start

_start:
    mov     rax, 1
    mov     rdi, 1
    mov     rsi, prompt
    mov     rdx, 15
    syscall

    mov     rax, 0
    mov     rdi, 0
    mov     rsi, buf
    mov     rdx, 255
    syscall

    ; –∑–∞–º–µ–Ω—è–µ–º \n –Ω–∞ 0
    mov     rdi, buf
    mov     rcx, rax                        ; —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—á–∏—Ç–∞–ª–∏
    mov     al, 10
    repne   scasb
    mov     byte [rdi-1], 0

    ; —Å—á–∏—Ç–∞–µ–º –¥–ª–∏–Ω—É –¥–æ 0
    mov     rdi, buf
    xor     rcx, rcx
    not     rcx                             ; rcx = -1
    xor     al, al
    cld
    repne   scasb                           ; –∏—â–µ–º 0
    not     rcx
    dec     rcx                             ; –¥–ª–∏–Ω–∞ –±–µ–∑ 0

    ; —á–∏—Å–ª–æ ‚Üí —Å—Ç—Ä–æ–∫–∞ (–ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±)
    mov     rdi, numbuf + 31
    mov     byte [rdi], 0
    mov     rbx, 10
.convert:
    dec     rdi
    xor     rdx, rdx
    div     rbx
    add     dl, '0'
    mov     [rdi], dl
    test    rax, rax
    jnz     .convert

    ; –≤—ã–≤–æ–¥
    mov     rax, 1
    mov     rdi, 1
    mov     rsi, msg
    mov     rdx, 9
    syscall

    mov     rax, 1
    mov     rdi, 1
    mov     rsi, rdi                        ; –Ω–∞—á–∞–ª–æ —á–∏—Å–ª–∞
    mov     rdx, numbuf + 32
    sub     rdx, rsi                        ; –¥–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏ —á–∏—Å–ª–∞
    syscall

    mov     rax, 1
    mov     rdi, 1
    mov     rsi, prompt + 14                ; —Ç–∞–º \n
    mov     rdx, 1
    syscall

    mov     rax, 60
    xor     rdi, rdi
    syscall
```

### 5.4 ‚Äî –ü–æ–∑–∏—Ü–∏—è –≤–≤–µ–¥—ë–Ω–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ –≤ —Å—Ç—Ä–æ–∫–µ (–≤–∞—Ä–∏–∞–Ω—Ç 1)

```nasm
; –õ–† ‚Ññ6 –ó–∞–¥–∞–Ω–∏–µ 5.4 –≤–∞—Ä–∏–∞–Ω—Ç 1 ‚Äî –ø–æ–∑–∏—Ü–∏—è —Å–∏–º–≤–æ–ª–∞
section .data
    src     db      "–ù–∞–π–¥–∏ –±—É–∫–≤—É –≤ —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–µ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞", 0
    prompt  db      10, "–í–≤–µ–¥–∏ —Å–∏–º–≤–æ–ª: "
    found   db      10, "–ü–æ–∑–∏—Ü–∏—è (—Å 0): "
    notf    db      10, "–ù–µ –Ω–∞–π–¥–µ–Ω–æ", 10

section .bss
    sym     resb    2
    numbuf  resb    16

section .text
    global _start

_start:
    mov     rax, 1
    mov     rdi, 1
    mov     rsi, prompt
    mov     rdx, 16
    syscall

    mov     rax, 0
    mov     rdi, 0
    mov     rsi, sym
    mov     rdx, 2
    syscall

    mov     al, [sym]

    mov     rdi, src
    xor     rcx, rcx
    cld

.loop:
    cmp     byte [rdi], 0
    je      .notfound
    scasb
    je      .found
    inc     rcx
    jmp     .loop

.found:
    ; rcx = –ø–æ–∑–∏—Ü–∏—è

    mov     rdi, numbuf + 15
    mov     byte [rdi], 10
    mov     rbx, 10
.conv:
    dec     rdi
    xor     rdx, rdx
    div     rbx
    add     dl, '0'
    mov     [rdi], dl
    test    rax, rax
    jnz     .conv

    mov     rax, 1
    mov     rdi, 1
    mov     rsi, found
    mov     rdx, 18
    syscall

    mov     rax, 1
    mov     rdi, 1
    mov     rsi, rdi
    mov     rdx, numbuf + 16
    sub     rdx, rsi
    syscall
    jmp     .exit

.notfound:
    mov     rax, 1
    mov     rdi, 1
    mov     rsi, notf
    mov     rdx, 12
    syscall

.exit:
    mov     rax, 60
    xor     rdi, rdi
    syscall
```

### 5.5 ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è

```nasm
; –õ–† ‚Ññ6 –ó–∞–¥–∞–Ω–∏–µ 5.5 ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è
section .data
    good    db      "qwerty123", 0
    goodlen equ     $ - good - 1

    prompt  db      "–ü–∞—Ä–æ–ª—å: "
    ok      db      10, "–î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à–µ–Ω", 10
    bad     db      10, "–ü–∞—Ä–æ–ª—å –Ω–µ–≤–µ—Ä–Ω—ã–π", 10

section .bss
    input   resb    64

section .text
    global _start

_start:
    mov     rax, 1
    mov     rdi, 1
    mov     rsi, prompt
    mov     rdx, 8
    syscall

    mov     rax, 0
    mov     rdi, 0
    mov     rsi, input
    mov     rdx, 63
    syscall

    ; –∑–∞–º–µ–Ω—è–µ–º \n –Ω–∞ 0
    mov     rdi, input
    mov     rcx, rax
    mov     al, 10
    repne   scasb
    mov     byte [rdi-1], 0

    ; —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º
    mov     rsi, input
    mov     rdi, good
    mov     rcx, goodlen
    cld
    repe    cmpsb

    jne     .wrong

    mov     rax, 1
    mov     rdi, 1
    mov     rsi, ok
    mov     rdx, 18
    syscall
    jmp     .exit

.wrong:
    mov     rax, 1
    mov     rdi, 1
    mov     rsi, bad
    mov     rdx, 17
    syscall

.exit:
    mov     rax, 60
    xor     rdi, rdi
    syscall
```

### –í—Å—ë –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ (–ø.6.2)

–ü—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä—É–π –≤—Å–µ –±–ª–æ–∫–∏ –∫–æ–¥–∞ –≤—ã—à–µ –æ–¥–∏–Ω –ø–æ–¥ –¥—Ä—É–≥–∏–º (—É–±–µ—Ä–∏ –ª–∏—à–Ω–∏–µ `_start`, –æ—Å—Ç–∞–≤—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –≤ –Ω–∞—á–∞–ª–µ).  
–ú–µ–∂–¥—É –∑–∞–¥–∞–Ω–∏—è–º–∏ –≤—Å—Ç–∞–≤—å –º–µ—Ç–∫–∏ —Ç–∏–ø–∞ `jmp next_task` –∏ `next_task:` —á—Ç–æ–±—ã –æ–Ω–∏ —à–ª–∏ –ø–æ –æ—á–µ—Ä–µ–¥–∏.

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –ø–∏—à–∏, –¥–æ—Ä–∞–±–æ—Ç–∞—é –ª—é–±–æ–π –∫—É—Å–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–¥–µ–ª–∞—é –∫—Ä–∞—Å–∏–≤–µ–µ –≤—ã–≤–æ–¥ –∏–ª–∏ –¥–æ–±–∞–≤–ª—é –±–æ–ª—å—à–µ –ø—Ä–æ–≤–µ—Ä–æ–∫).  
–£–¥–∞—á–∏ —Å–¥–∞—Ç—å –ª–∞–±—É, –¥–µ—Ä–∂–∏—Å—å! üí™
